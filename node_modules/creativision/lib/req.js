//req解析处理器
o2c.runtime.req = function(req){
	
  //->简单方法的集成
  //ip的解析
  req.ip = req.connection.remoteAddress;
  //getheader的方法
  req.get = function(n){
    n = n.toLowerCase();
    return req.headers[n];
  }
  //xhr方法
  req.xhr = function(){
    var val = req.get('X-Requested-With') || '';
    return 'xmlhttprequest' == val.toLowerCase();
  }
  
  //url解析
  req = urlparser(req);
  
  return req;
}


//->从属函数部分
var url = require('url');
var querystring = require('querystring');

function urlparser(req){
  req.urlinfo = url.parse(req.url);
  req.path = req.urlinfo.pathinfo;
  req.query = querystring.parse(req.urlinfo.query);
  return req;
}